<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø± | SHIHNAH</title>
    <style>
        :root { --navy: #0a192f; --gold: #f39c12; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f4f7f9; color: #333; }
        header { background: var(--navy); padding: 15px 5%; color: white; display: flex; justify-content: space-between; align-items: center; }
        .container { max-width: 800px; margin: 40px auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        h1 { color: var(--navy); border-bottom: 2px solid var(--gold); padding-bottom: 10px; }
        .company-row { display: flex; align-items: center; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; }
        .company-name { font-weight: bold; flex: 1; }
        .input-group { display: flex; align-items: center; gap: 10px; }
        input[type="number"] { padding: 8px; border: 1px solid #ccc; border-radius: 5px; width: 100px; }
        .btn-update { background: var(--gold); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-update:hover { background: #d4890e; }
        .back-link { color: white; text-decoration: none; font-size: 0.9rem; border: 1px solid white; padding: 5px 10px; border-radius: 5px; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 900; font-size: 1.2rem;">ğŸ›¡ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ</div>
    <a href="index.html" class="back-link">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹</a>
</header>

<div class="container">
    <h1>ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø´Ø­Ù† (Ù„Ù„ÙƒÙŠÙ„Ùˆ Ø¬Ø±Ø§Ù…)</h1>
    <p style="font-size: 0.9rem; color: #666;">ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù‡Ù†Ø§ Ø³ÙŠØ¤Ø«Ø± ÙÙˆØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.</p>

    <div id="admin-panel">
        </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
    import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

    // Ù†ÙØ³ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ù„ÙŠ ÙÙŠ index.html
    const firebaseConfig = {
        apiKey: "AIzaSyA_BaYYI_ZC8EO5RRMxL1Wq-_oYBAHuT2M",
        authDomain: "sh7na-database.firebaseapp.com",
        databaseURL: "https://sh7na-database-default-rtdb.firebaseio.com",
        projectId: "sh7na-database",
        storageBucket: "sh7na-database.firebasestorage.app",
        messagingSenderId: "334773528813",
        appId: "1:334773528813:web:7ff9c93d44b8d4ef8dc4e4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const companies = [
        { id: "almajdouie", name: "Ø§Ù„Ù…Ø¬Ø¯ÙˆØ¹ÙŠ" },
        { id: "smsa", name: "Ø³Ù…Ø³Ø§ (SMSA)" },
        { id: "aramex", name: "Ø£Ø±Ø§Ù…ÙƒØ³" },
        { id: "zajel", name: "Ø²Ø§Ø¬Ù„" },
        { id: "spl", name: "Ø³Ø¨Ù„ (SPL)" },
        { id: "dhl", name: "DHL" },
        { id: "albassami", name: "Ø§Ù„Ø¨Ø³Ø§Ù…ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©" }
    ];

    const panel = document.getElementById('admin-panel');

    // Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ¹Ø±Ø¶Ù‡Ø§
    const ratesRef = ref(db, 'shipping_rates');
    onValue(ratesRef, (snapshot) => {
        const rates = snapshot.val() || {};
        panel.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø¯ÙŠÙ…

        companies.forEach(company => {
            const currentPrice = rates[company.id] || 0;
            const row = document.createElement('div');
            row.className = 'company-row';
            row.innerHTML = `
                <div class="company-name">${company.name}</div>
                <div class="input-group">
                    <input type="number" id="input-${company.id}" value="${currentPrice}" step="0.5">
                    <span>Ø±ÙŠØ§Ù„</span>
                    <button class="btn-update" onclick="updateSinglePrice('${company.id}')">ØªØ­Ø¯ÙŠØ«</button>
                </div>
            `;
            panel.appendChild(row);
        });
    });

    // Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± ÙÙŠ Firebase
    window.updateSinglePrice = function(companyId) {
        const newValue = parseFloat(document.getElementById(`input-${companyId}`).value);
        if (isNaN(newValue)) {
            alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­");
            return;
        }

        set(ref(db, 'shipping_rates/' + companyId), newValue)
            .then(() => {
                alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± Ø¨Ù†Ø¬Ø§Ø­!");
            })
            .catch((error) => {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«:", error);
                alert("ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ«ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Rules ÙÙŠ Firebase");
            });
    };
</script>

</body>
</html>
