<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>SHIHNAH | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©</title>
    <style>
        :root { --navy: #0a192f; --gold: #f39c12; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #0a2e5c; color: white; }
        header { background: #000; padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; }
        .nav-btns { display: flex; gap: 10px; }
        .btn { padding: 6px 15px; border-radius: 5px; text-decoration: none; font-size: 0.8rem; font-weight: bold; }
        .btn-black { border: 1px solid white; color: white; }
        .btn-gold { background: var(--gold); color: white; }
        .btn-red { background: #e74c3c; color: white; border: none; }
        .hero { text-align: center; padding: 40px 20px; background: linear-gradient(rgba(10,46,92,0.6), rgba(10,46,92,0.6)), url('bg.jpg'); background-size: cover; }
        .search-container { background: white; border-radius: 15px; padding: 20px; max-width: 1050px; margin: -30px auto 30px; display: flex; gap: 15px; align-items: flex-end; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .fld { flex: 1; display: flex; flex-direction: column; gap: 5px; }
        .fld label { font-size: 0.75rem; font-weight: bold; color: #0a2e5c; }
        select, input { padding: 8px; border: 1px solid #ccc; border-radius: 5px; width: 100%; font-family: inherit; }
        .btn-search { background: var(--gold); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 15px; padding: 25px; text-align: center; color: #0a2e5c; border-bottom: 5px solid var(--gold); position: relative; }
        .eco-tag { position: absolute; top: 10px; right: 10px; font-size: 1.2rem; }
        .price { font-size: 1.6rem; font-weight: 800; margin: 10px 0; color: #0a2e5c; }
        .btn-book { background: #0a2e5c; color: white; border: none; width: 100%; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .eco-info { font-size: 0.65rem; color: #27ae60; font-weight: bold; display: block; margin-bottom: 10px; }
    </style>
</head>
<body>
    <header>
        <div class="nav-btns">
            <a href="track.html" class="btn btn-black">ØªØªØ¨Ø¹ Ø´Ø­Ù†Ø©</a>
            <a href="admin.html" class="btn btn-gold">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª</a>
            <a href="user-dashboard.html" class="btn btn-gold">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙØ±Ø§Ø¯</a>
            <a href="site-admin.html" class="btn btn-red">ğŸ›¡ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©</a>
        </div>
        <div style="font-weight: 900; font-size: 1.5rem;">SHIHNAH <img src="icon.png" width="30"></div>
    </header>

    <div class="hero">
        <h1>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© Ù„Ù„Ù†Ù‚Ù„ Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠ</h1>
        <p>Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø°ÙƒÙŠ Ø¨ÙŠÙ† ÙƒØ§ÙØ© Ù…Ø¯Ù† ÙˆÙ…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ù…Ù„ÙƒØ©</p>
    </div>

    <div class="search-container">
        <div class="fld"><label>Ù…Ù† Ù…Ø¯ÙŠÙ†Ø©:</label>
            <select id="from_city">
                <optgroup label="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙˆØ³Ø·Ù‰"><option>Ø§Ù„Ø±ÙŠØ§Ø¶</option><option>Ø§Ù„Ø®Ø±Ø¬</option></optgroup>
                <optgroup label="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„ØºØ±Ø¨ÙŠØ©)"><option>Ø¬Ø¯Ø©</option><option>Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©</option></optgroup>
                <optgroup label="Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©"><option>Ø§Ù„Ø¯Ù…Ø§Ù…</option><option>Ø§Ù„Ø®Ø¨Ø±</option><option>Ø§Ù„Ø£Ø­Ø³Ø§Ø¡</option></optgroup>
                <optgroup label="Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙƒØ¨Ø±Ù‰"><option>Ù†ÙŠÙˆÙ… (NEOM)</option><option>Ø§Ù„Ù‚Ø¯ÙŠØ©</option></optgroup>
            </select>
        </div>
        <div class="fld"><label>Ø¥Ù„Ù‰ ÙˆØ¬Ù‡Ø©:</label>
            <select id="to_city">
                <option>Ø¬Ø¯Ø©</option><option>Ø§Ù„Ø±ÙŠØ§Ø¶</option><option>Ø§Ù„Ø¯Ù…Ø§Ù…</option><option>Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©</option>
            </select>
        </div>
        <div class="fld" style="flex: 0.4;"><label>Ø§Ù„ÙˆØ²Ù†:</label><input type="number" id="weight_val" value="1"></div>
        <div class="fld" style="flex: 0.6;"><label>Ø§Ù„ÙˆØ­Ø¯Ø©:</label>
            <select id="unit_type">
                <option value="kg">ÙƒÙŠÙ„Ùˆ (KG)</option>
                <option value="gm">Ø¬Ø±Ø§Ù… (Gram)</option>
            </select>
        </div>
        <button class="btn-search" onclick="updatePrices()">Ø¨Ø­Ø« Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</button>
    </div>

    <div class="results-grid" id="results-area">
        <div class="card"><h3>Ø§Ù„Ù…Ø¬Ø¯ÙˆØ¹ÙŠ</h3><p>Ù†Ù‚Ù„ Ø«Ù‚ÙŠÙ„ ÙˆÙ„ÙˆØ¬Ø³ØªÙŠ</p><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><h3>Ø³Ù…Ø³Ø§ (SMSA)</h3><p>Ø£ÙˆØ³Ø¹ Ø§Ù†ØªØ´Ø§Ø± Ù…Ø­Ù„ÙŠ</p><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><span class="eco-tag">ğŸŒ±</span><h3>Ø£Ø±Ø§Ù…ÙƒØ³</h3><p>ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ ÙˆÙ…Ø±Ù†</p><span class="eco-info">Ø£Ø³Ø·ÙˆÙ„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù…ØªØ§Ø­</span><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><h3>Ø²Ø§Ø¬Ù„</h3><p>Ø´Ø­Ù† Ø¨Ø±ÙŠ Ø§Ù‚ØªØµØ§Ø¯ÙŠ</p><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><span class="eco-tag">ğŸŒ±</span><h3>Ø³Ø¨Ù„ (SPL)</h3><p>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ</p><span class="eco-info">Ø¯Ø¹Ù… Ù…Ø¨Ø§Ø¯Ø±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡</span><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><span class="eco-tag">ğŸŒ±</span><h3>DHL</h3><p>Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ø³Ø±ÙŠØ¹</p><span class="eco-info">Ø®Ø¯Ù…Ø© GoGreen Zero Emissions</span><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
        <div class="card"><h3>Ø§Ù„Ø¨Ø³Ø§Ù…ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</h3><p>Ù†Ù‚Ù„ Ø¨Ø¶Ø§Ø¦Ø¹ ÙˆÙ…Ø±ÙƒØ¨Ø§Øª</p><div class="price">--.-- Ø±ÙŠØ§Ù„</div><button class="btn-book">Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button></div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
      import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

      // Ù…ÙØ§ØªÙŠØ­Ùƒ Ø§Ù„Ø®Ø§ØµØ©
      const firebaseConfig = {
        apiKey: "AIzaSyA_BaYYI_ZC8EO5RRMxL1Wq-_oYBAHuT2M",
        authDomain: "sh7na-database.firebaseapp.com",
        databaseURL: "https://sh7na-database-default-rtdb.firebaseio.com",
        projectId: "sh7na-database",
        storageBucket: "sh7na-database.firebasestorage.app",
        messagingSenderId: "334773528813",
        appId: "1:334773528813:web:7ff9c93d44b8d4ef8dc4e4"
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      window.updatePrices = function() {
        const weight = parseFloat(document.getElementById('weight_val').value) || 1;
        const unit = document.getElementById('unit_type').value;
        const factor = (unit === "gm") ? 0.001 : 1;

        const ratesRef = ref(db, 'shipping_rates');
        onValue(ratesRef, (snapshot) => {
            const rates = snapshot.val();
            if (!rates) { alert("ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Firebase ØªØ­Øª shipping_rates"); return; }
            
            const mapping = {
                "Ø§Ù„Ù…Ø¬Ø¯ÙˆØ¹ÙŠ": rates.almajdouie,
                "Ø³Ù…Ø³Ø§ (SMSA)": rates.smsa,
                "Ø£Ø±Ø§Ù…ÙƒØ³": rates.aramex,
                "Ø²Ø§Ø¬Ù„": rates.zajel,
                "Ø³Ø¨Ù„ (SPL)": rates.spl,
                "DHL": rates.dhl,
                "Ø§Ù„Ø¨Ø³Ø§Ù…ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©": rates.albassami
            };

            document.querySelectorAll('.card').forEach(card => {
                const name = card.querySelector('h3').innerText.trim();
                const basePrice = mapping[name];
                if (basePrice) {
                    const finalPrice = basePrice * weight * factor;
                    card.querySelector('.price').innerText = finalPrice.toFixed(2) + " Ø±ÙŠØ§Ù„";
                }
            });
        }, { onlyOnce: true });
      };
    </script>
</body>
</html>
